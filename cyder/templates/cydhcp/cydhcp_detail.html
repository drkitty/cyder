{% extends "base/detail.html" %}


{% block sidebar %}
  {% include "base/sidebar.html" %}
{% endblock %}

{% block view_metadata %}
  <span id="view-metadata"
        data-objType="{{ obj_type }}"
        data-objPk="{{ obj.pk }}"
        data-prettyObjType="{{ pretty_obj_type }}"
        data-getUrl="{{ url('get-update-form') }}"
        data-objName="{{ obj }}"
        data-csrfToken="{{ csrf_token }}">
  </span>
{% endblock %}

{% block extra_content %}
<!-- <div class="form">
    <p>
        <label for="log">Log (oldest first):</label>
        <textarea rows="10" cols="50" id="log" readonly>{% if obj.log %}{{ obj.log }}{% else %}no log data{% endif %}</textarea>
    </p>
    <p>
        <label for="last_save_user">Last modified by:</label>
        <p id="last_save_user">
            {% if obj.last_save_user %}{{ obj.last_save_user }}{% else %}unlogged user{% endif %}
        </p>
    </p>
</div> -->
{% if log_entries %}
<h2>Recent changes</h2>
<table class="table">
    <thead>
    <th>User</th>
    <th>Date</th>
    <th>Changed Values</th>
    </tr>
    </thead>
    <tbody>
    {% for entry in log_entries %}
    <tr>
        <td>{{ entry['last_save_user'] }}</td>
        <td>{{ entry['modified'] }}</td>
        <td>
            <ul>
            {% for col in entry['changes'] %}
                <li><b>{{ col }}:</b> {{ entry['changes'][col] }}</li>
            {% endfor %}
            </ul>
        </td>
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endif %}
{% endblock %}